PRAGMA foreign_keys = ON;
CREATE TABLE IF NOT EXISTS User (
	ID INTEGER NOT NULL,
	Initial INTEGER NOT NULL,
	Name VARCHAR(30) NOT NULL,
	Surname VARCHAR(30) NOT NULL,
	PRIMARY KEY (ID),
	UNIQUE (Initial)
);
CREATE TABLE IF NOT EXISTS Auth (
	ID INTEGER NOT NULL,
	Username VARCHAR(40) NOT NULL,
	Password INTEGER NOT NULL,
	Salt INTEGER NOT NULL,
	Admin BOOLEAN NOT NULL,
	UserInitial INTEGER,
	PRIMARY KEY (ID),
	UNIQUE(Username),
	UNIQUE(UserInitial),
	FOREIGN KEY (UserInitial) REFERENCES User(Initial) ON UPDATE CASCADE ON DELETE SET NULL
);
CREATE TABLE IF NOT EXISTS Auction (
	ID INTEGER NOT NULL,
	Name VARCHAR(70) NOT NULL,
	Expires INTEGER NOT NULL,
	ImageName VARCHAR(25) NOT NULL,
	PRIMARY KEY (ID)
);
CREATE TABLE IF NOT EXISTS Bid (
	ID INTEGER NOT NULL,
	AuctionID INTEGER NOT NULL,
	UserInitial INTEGER NOT NULL,
	Amount REAL NOT NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (AuctionID) REFERENCES Auction(ID) ON UPDATE CASCADE ON DELETE CASCADE,
	FOREIGN KEY (UserInitial) REFERENCES User(Initial) ON UPDATE CASCADE ON DELETE CASCADE
);